<div class="container mt-5">
  <div class="row justify-content-center">
      <h3 class="mt-0"> Create Fisher account </h3>
  </div>
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <div class="row justify-content-center mt-3">
      <div class="form-group col-md-6">
        <div class="form-group required">
          <label class="control-label mb-1 small text-info" for="username"> Käyttäjätunnus</label>
          <input class="form-control form-control-sm" type="text" formControlName="username" id="username" [ngClass]="{ 'is-invalid': controls.username.errors && controls.username.touched}">
          <div *ngIf="controls.username.errors && controls.username.touched" class="invalid-feedback">
            <div *ngIf="controls.username.errors.required"> Käyttäjätunnus puuttuu</div>
            <div *ngIf="controls.username.errors.userExists"> Käyttäjätunnus on jo olemassa</div>
            <div *ngFor="let error of controls.username.errors.serverError"> {{ error }} </div>
          </div>
        </div>
        <div class="form-group required">
          <label class="control-label mb-1 small text-info" for="email" > Sähköposti</label>
          <input class="form-control form-control-sm " type="email" formControlName="email" id="email" [ngClass]="{ 'is-invalid': controls.email.touched && controls.email.errors}">
          <div *ngIf="controls.email.touched && controls.email.errors" class="invalid-feedback">
            <div *ngIf="controls.email.errors.required"> Sähköpostiosoite puuttuu</div>
            <div *ngIf="controls.email.errors.pattern"> Sähköpostiosoite on virheellinen</div>
            <div *ngIf="controls.email.errors.emailExists"> Sähköpostiosoite on jo olemassa</div>
            <div *ngFor="let error of controls.email.errors.serverError"> {{ error }} </div>
          </div>
        </div>
        <div class="form-group required">
          <label class="control-label mb-1 small text-info" for="password1"> Salasana</label>
          <input class="form-control form-control-sm" type="password" formControlName="password1" id="password1" [ngClass]="{ 'is-invalid': controls.password1.touched && controls.password1.errors}">
          <span class="small pl-0 text-secondary"> {{ pswInfoText }} </span>
          <div *ngIf="controls.password1.touched && controls.password1.errors" class="invalid-feedback">
            <div *ngIf="controls.password1.errors.required"> Salasana puuttuu </div>
            <div *ngIf="controls.password1.errors.minlength"> Salasanassa pitää olla vähintään 8 merkkiä </div>
            <div *ngIf="controls.password1.errors.canNotMatch"> Salasana ei voi olla sama kuin käyttäjätunnus </div>
            <div *ngFor="let error of controls.password1.errors.serverError"> {{ error }} </div>
          </div>
        </div>
        <div class="form-group required">
          <label class="control-label mb-1 small text-info" for="password2"> Salasana uudelleen</label>
          <input class="form-control form-control-sm" type="password" formControlName="password2" id="password2" [ngClass]="{ 'is-invalid': controls.password2.touched && controls.password2.errors}">
          <div *ngIf="controls.password2.touched && controls.password2.errors" class="invalid-feedback">
            <div *ngIf="controls.password2.errors.required"> Salasanan vahvistus puuttuu </div>
            <div *ngIf="controls.password2.errors.mustMatch"> Salasanojen tulee olla samat </div>
            <div *ngFor="let error of controls.password2.errors.serverError"> {{ error }} </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row justify-content-center mt-3">
      <div class="form-group col-md-6">
        <button [disabled]="loading || loginForm.invalid" class="btn btn-info btn-block md-6">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          Luo tili
        </button>
      </div>
    </div>
  </form>
</div>
